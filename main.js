(()=>{async function e(e){const t=`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${e}?unitGroup=metric&elements=datetime%2CdatetimeEpoch%2CresolvedAddress%2Ctemp%2Cfeelslike%2Chumidity%2Cwindspeed%2Cuvindex%2Cconditions%2Cdescription%2Cicon&include=remote%2Cobs%2Ccurrent%2Cfcst&key=T3K39GSEC83MWTCTJQVNUSYSN&contentType=json`,n=await async function(e){const t=await fetch(e);if(!t.ok)throw new Error(t.status);return await t.json()}(t),s=n.resolvedAddress,{currentConditions:i}=n,{temp:c,humidity:o,conditions:r,feelslike:d,windspeed:l}=i;return{address:s,conditions:r,temp:c,feelsLike:d,humidity:o,windSpeed:l}}function t(e){let t=9*e/5;return t+=32,+t.toFixed(2)}function n(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=document.querySelector(".condition"),c=document.querySelector(".address"),o=document.querySelector(".temp"),r=document.querySelector(".feels-like"),d=document.querySelector(".humidity"),l=document.querySelector(".wind");i.innerText=e.conditions,c.innerText=e.address;const u=n?e.temp:t(e.temp);o.innerText=u;const a=n?e.feelsLike:t(e.feelsLike);r.innerText=`FEELS LIKE: ${a}`,d.innerText=`HUMIDITY: ${e.humidity}%`,l.innerText=`WIND: ${e.windSpeed} ${s?"KPH":"MPH"}`;const m=n?"C":"F",y=document.createElement("sup");y.classList.add("temp-symbol"),y.innerText="Â°"+m,o.appendChild(y.cloneNode(!0)),r.appendChild(y.cloneNode(!0));const p=e.conditions.toLowerCase();let v="";p.includes("rain")?v="rainy":p.includes("snow")?v="snowy":p.includes("partially")?v="partially-cloudy":p.includes("cloudy")?v="cloudy":p.includes("overcast")?v="overcast":p.includes("clear")&&(v="sunny"),document.body.classList=[],document.body.classList.add(v)}let s=null;const i=document.querySelector("#city");i.value="Tehran",e("tehran").then((e=>{n(e),s=e})),document.querySelector("button.submit-city").addEventListener("click",(async t=>{t.preventDefault();const c=i.value;try{const t=await e(c);n(t),s=t}catch(e){const t=document.querySelector("span.error");t.classList.add("visible"),i.classList.add("error"),400==+e.message?t.innerText="City info is not available :(":t.innerText=e.message}})),i.addEventListener("input",(()=>{const e=document.querySelector("span.error");i.classList.remove("error"),e.classList.remove("visible")}));const c=document.querySelector("button.celsius"),o=document.querySelector("button.fahrenheit");c.addEventListener("click",(()=>{c.classList.add("selected"),o.classList.remove("selected"),n(s,!0)})),o.addEventListener("click",(()=>{c.classList.remove("selected"),o.classList.add("selected"),n(s,!1)}))})();
//# sourceMappingURL=main.js.map